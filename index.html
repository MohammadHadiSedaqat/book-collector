<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Explorer Dark Mode Animated</title>
<link rel="stylesheet" href="style.css">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }


</style>
</head>
<body>
<h1>Book Explorer Dark</h1>

<div class="search-container">
    <input type="text" id="bookName" placeholder="Enter book name...">
    <button onclick="searchBook()">Search</button>
</div>

<div class="books-container" id="booksContainer"></div>

<div class="modal" id="bookModal">
    <button class="close-btn" onclick="closeModal()">Ã—</button>
    <div class="modal-content" id="modalContent"></div>
</div>

<script>
async function searchBook() {
    const name = document.getElementById("bookName").value.trim();
    if (!name) return alert("Please enter a book name!");
    const container = document.getElementById("booksContainer");
    container.innerHTML = "<p style='color:white'>Loading...</p>";

    try {
        const response = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(name)}&limit=20`);
        const data = await response.json();
        container.innerHTML = "";
        if(data.docs.length===0){container.innerHTML="<p style='color:white'>No books found.</p>";return;}

        data.docs.forEach((book,i)=>{
            const coverId = book.cover_i;
            const imgSrc = coverId ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg` : "https://via.placeholder.com/180x240?text=No+Image";
            const card = document.createElement("div");
            card.className = "book-card";
            card.style.animationDelay = `${i*0.05}s`;
            card.innerHTML=`
                <img src="${imgSrc}" alt="${book.title}">
                <div class="book-info">
                    <h3>${book.title}</h3>
                    <button onclick='showDetailsModal(${JSON.stringify(book).replace(/"/g,"&quot;")})'>View Details</button>
                </div>
            `;
            container.appendChild(card);
        });

    } catch(err){console.error(err);container.innerHTML="<p style='color:white'>Error fetching books.</p>";}
}

function showDetailsModal(book){
    const modal = document.getElementById("bookModal");
    const content = document.getElementById("modalContent");
    content.innerHTML = "";
    const books = Array.isArray(book)?book:[book];
    books.forEach((b,i)=>{
        const coverId = b.cover_i;
        const imgSrc = coverId ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg` : "https://via.placeholder.com/180x240?text=No+Image";
        const card = document.createElement("div");
        card.className = "book-detail-card";
        card.style.animationDelay = `${i*0.05}s`;
        card.innerHTML=`
            <img src="${imgSrc}" alt="${b.title}">
            <h3>${b.title}</h3>
            <p><strong>Author:</strong> ${b.author_name?b.author_name.join(", "):"Unknown"}</p>
            <p><strong>Year:</strong> ${b.first_publish_year || "N/A"}</p>
            <p><strong>Language:</strong> ${b.language?b.language.join(","):"N/A"}</p>
            <p><strong>Editions:</strong> ${b.edition_count||"N/A"}</p>
            <p><strong>Ebook Access:</strong> ${b.ebook_access||"N/A"}</p>
        `;
        content.appendChild(card);
    });
    modal.style.display="flex";
    setTimeout(()=>modal.classList.add("show"),50);
}

function closeModal(){
    const modal=document.getElementById("bookModal");
    modal.classList.remove("show");
    setTimeout(()=>modal.style.display="none",400);
}
</script>
</body>
</html>
